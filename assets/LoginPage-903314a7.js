import{H as C,J as E,i as p,e as S,u as P,d as B,r as T,R as v,K as N,j as a,L as M,M as A,q as i,O as h,P as g,I as F,B as I}from"./index-7e0697ca.js";import{l as f}from"./authThunks-9b0f1974.js";var _=(e=>(e[e.MAX_PASSWORD_LENGTH=16]="MAX_PASSWORD_LENGTH",e[e.MIN_PASSWORD_LENGTH=6]="MIN_PASSWORD_LENGTH",e))(_||{}),c=(e=>(e.INVALID_EMAIL="Invalid email",e.MAX_LENGTH="Must be at most 16 characters",e.MIN_LENGTH="Must be at least 6 characters",e))(c||{});const H=C().shape({email:E().email(c.INVALID_EMAIL).required(p.REQUIRED_FIELD),password:E().max(_.MAX_PASSWORD_LENGTH,c.MAX_LENGTH).min(_.MIN_PASSWORD_LENGTH,c.MIN_LENGTH).required(p.REQUIRED_FIELD)}),z="_authForm_3zb5r_1",D="_authFieldContainer_3zb5r_6",G="_authInputContainer_3zb5r_12",O="_authFieldError_3zb5r_19",w="_authLabel_3zb5r_23",y="_authInput_3zb5r_12",W="_authFormNavigationContainer_3zb5r_39",k="_formButton_3zb5r_43",X="_authButton_3zb5r_51",q="_resetButton_3zb5r_55",$="_testError_3zb5r_60",t={authForm:z,authFieldContainer:D,authInputContainer:G,authFieldError:O,authLabel:w,authInput:y,authFormNavigationContainer:W,formButton:k,authButton:X,resetButton:q,testError:$},Q=()=>{const e=S(),L=P(),{error:x,isPending:u,user:l}=B(r=>r.authReducer);T.useEffect(()=>{l!=null&&l._id&&localStorage.getItem("access-token")&&L(v.HOME),e({type:N.RESET_ERROR})},[l]);const b=async r=>{e(f({...r}))},j=r=>{r(),e({type:N.RESET_ERROR})};return a.jsx("form",{className:t.authForm,children:u?a.jsx(M,{}):a.jsx(A,{initialValues:{email:"",password:""},validationSchema:H,onSubmit:b,children:({handleSubmit:r,handleBlur:d,resetForm:R})=>a.jsxs("div",{className:t.authFieldContainer,children:[a.jsx("span",{className:i(h.modalError,t.authFieldError,t.testError),children:x}),a.jsx(g,{name:"email",children:({field:o,meta:n})=>a.jsxs("fieldset",{className:t.authInputContainer,children:[a.jsx("label",{className:t.authLabel,htmlFor:"email",children:"Email"}),a.jsx(F,{...o,className:t.authInput,id:"email",type:"email",placeholder:"Email",onBlur:s=>{o.onBlur(s),d(s)}}),a.jsx("span",{className:i(h.modalError,t.authFieldError),children:n.touched&&n.error})]})}),a.jsx(g,{name:"password",children:({field:o,meta:n})=>a.jsxs("fieldset",{className:t.authInputContainer,children:[a.jsx("label",{className:t.authLabel,htmlFor:"password",children:"Password"}),a.jsx(F,{...o,className:t.authInput,type:"password",id:"password",placeholder:"Password",onBlur:s=>{o.onBlur(s),d(s)}}),a.jsx("span",{className:i(h.modalError,t.authFieldError),children:n.touched&&n.error})]})}),a.jsxs("div",{className:t.authFormNavigationContainer,children:[a.jsx(I,{disabled:u,onClick:()=>j(R),className:i(t.formButton,t.resetButton),children:"Reset"}),a.jsx(I,{disabled:u,onClick:()=>r(),className:i(t.formButton,t.authButton),children:"Login"})]})]})})})},U="_loginFormContainer_a82po_1",J="_loginPageTitle_a82po_12",K="_loginPageContainer_a82po_19",m={loginFormContainer:U,loginPageTitle:J,loginPageContainer:K},V=()=>a.jsx("div",{className:m.loginPageContainer,children:a.jsxs("div",{className:m.loginFormContainer,children:[a.jsx("h4",{className:m.loginPageTitle,children:"Login"}),a.jsx(Q,{})]})});export{V as default};
