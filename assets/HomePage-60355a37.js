import{G as m,r as l,T as $,j as e,B as j,a as I,u as R,b as x,c as C,d as Y,R as z,e as Z,m as W,f as K,s as b,g as D,I as H,h as q,i as B,k,N as S,l as X,n as g,o as J,p as Q,q as tt,t as p,v as et,w as ot,x as nt,y as st,D as at,z as ct,A as dt,C as O,E as rt,F as it,H as U,J as lt,K as y,L as ht}from"./index-9e92654c.js";function ut(t){return m({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.742 13.045a8.088 8.088 0 0 1-2.077.271c-2.135 0-4.14-.83-5.646-2.336a8.025 8.025 0 0 1-2.064-7.723A1 1 0 0 0 9.73 2.034a10.014 10.014 0 0 0-4.489 2.582c-3.898 3.898-3.898 10.243 0 14.143a9.937 9.937 0 0 0 7.072 2.93 9.93 9.93 0 0 0 7.07-2.929 10.007 10.007 0 0 0 2.583-4.491 1.001 1.001 0 0 0-1.224-1.224zm-2.772 4.301a7.947 7.947 0 0 1-5.656 2.343 7.953 7.953 0 0 1-5.658-2.344c-3.118-3.119-3.118-8.195 0-11.314a7.923 7.923 0 0 1 2.06-1.483 10.027 10.027 0 0 0 2.89 7.848 9.972 9.972 0 0 0 7.848 2.891 8.036 8.036 0 0 1-1.484 2.059z"}}]})(t)}function Tt(t){return m({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6.993 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007S14.761 6.993 12 6.993 6.993 9.239 6.993 12zM12 8.993c1.658 0 3.007 1.349 3.007 3.007S13.658 15.007 12 15.007 8.993 13.658 8.993 12 10.342 8.993 12 8.993zM10.998 19h2v3h-2zm0-17h2v3h-2zm-9 9h3v2h-3zm17 0h3v2h-3zM4.219 18.363l2.12-2.122 1.415 1.414-2.12 2.122zM16.24 6.344l2.122-2.122 1.414 1.414-2.122 2.122zM6.342 7.759 4.22 5.637l1.415-1.414 2.12 2.122zm13.434 10.605-1.414 1.414-2.122-2.122 1.414-1.414z"}}]})(t)}function mt(t){return m({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 20a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8h2V6h-4V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2H3v2h2zM9 4h6v2H9zM8 8h9v12H7V8z"}},{tag:"path",attr:{d:"M9 10h2v8H9zm4 0h2v8h-2z"}}]})(t)}const pt="_switchThemeButton_1qxg7_1",Ct={switchThemeButton:pt},_t=()=>{const{type:t,setType:o}=l.useContext($);return e.jsx(j,{className:Ct.switchThemeButton,onClick:()=>o(n=>n===I.LIGHT?I.DARK:I.LIGHT),children:t===I.LIGHT?e.jsx(ut,{}):e.jsx(Tt,{})})},gt=""+new URL("logo-c9d4e892.svg",import.meta.url).href,xt="_headerContainer_1wjp0_1",Lt="_headerTitle_1wjp0_10",vt="_headerContent_1wjp0_10",jt="_headerNavigationContainer_1wjp0_20",It="_logoutButton_1wjp0_27",_={headerContainer:xt,headerTitle:Lt,headerContent:vt,headerNavigationContainer:jt,logoutButton:It},ft=()=>{const t=R(),o=x(),{user:n}=C(a=>a.authReducer);l.useEffect(()=>{n!=null&&n._id||s()},[n==null?void 0:n._id]);const s=()=>{localStorage.removeItem("access-token"),o({type:Y.RESET_TODOS}),t(z.LOGIN)};return e.jsxs("header",{className:_.headerContainer,children:[e.jsx("img",{className:_.headerLogo,src:gt,alt:"logo image"}),e.jsxs("h1",{className:_.headerTitle,children:[e.jsx("span",{className:_.headerContent,children:"to"}),e.jsx("span",{className:_.headerContent,children:"do"})]}),e.jsxs("div",{className:_.headerNavigationContainer,children:[e.jsx(j,{className:_.logoutButton,onClick:s,children:"Logout"}),e.jsx(_t,{})]})]})},Nt=t=>{const o=Z.HOURS_IN_DAY*W*K,n=new Date(t.getTime()+o);return b(n)};function Et(t){return m({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z"}}]})(t)}function yt(t){return m({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z"}}]})(t)}const Dt="_createTodoContainer_128yt_1",Bt="_createTodoInput_128yt_15",kt="_createTodoButton_128yt_28",St="_createTodoButtonTitle_128yt_46",f={createTodoContainer:Dt,createTodoInput:Bt,createTodoButton:kt,createTodoButtonTitle:St},wt="Enter",Mt=()=>{const{title:t}=C(r=>r.todoReducer),{user:o}=C(r=>r.authReducer),n=x(),s=r=>{n(tt(r))},a=D("createTodoModal")[1],i=async r=>{const u=t.trim();if(r.code===wt){if(!t.trim().length)return n(B({title:k.EMPTY_TITLE,type:S.ERROR}));await n(X({createdDate:b(new Date),expirationDate:Nt(new Date),title:u,isCompleted:!1,userId:o==null?void 0:o._id})),await n(g()),s("")}},h=r=>{const u=r.target.value;if(u.trim().length>=J.MAX_TITLE_LENGTH)return n(B({title:k.MAX_LENGTH,type:S.ERROR})),s(t.replace(u,""));s(Q(u))};return e.jsxs("div",{className:f.createTodoContainer,children:[e.jsx(H,{onKeyDown:i,onChange:h,value:t,className:f.createTodoInput,placeholder:"Enter new todo"}),e.jsx(j,{onClick:()=>a(!0),type:q.BUTTON,className:f.createTodoButton,children:e.jsxs("span",{className:f.createTodoButtonTitle,children:[e.jsx("span",{children:"Create"}),e.jsx(yt,{})]})})]})},Ht=(t,o)=>{const n=l.useRef(!1);l.useEffect(()=>{if(!n.current){n.current=!0;return}return t()},o)},At=500;function Vt(t,o=At){const[n,s]=l.useState(t);return l.useEffect(()=>{const a=setTimeout(()=>s(t),o);return()=>{clearTimeout(a)}},[t]),n}function Rt(t){return m({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M278.6 256l68.2-68.2c6.2-6.2 6.2-16.4 0-22.6-6.2-6.2-16.4-6.2-22.6 0L256 233.4l-68.2-68.2c-6.2-6.2-16.4-6.2-22.6 0-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3l68.2 68.2-68.2 68.2c-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3 6.2 6.2 16.4 6.2 22.6 0l68.2-68.2 68.2 68.2c6.2 6.2 16.4 6.2 22.6 0 6.2-6.2 6.2-16.4 0-22.6L278.6 256z"}}]})(t)}const zt="_searchTodoContainer_up0lw_1",bt="_searchClearIcon_up0lw_4",Ot="_searchClearIconDisabled_up0lw_17",Ut="_searchTodoInput_up0lw_21",N={searchTodoContainer:zt,searchClearIcon:bt,searchClearIconDisabled:Ot,searchTodoInput:Ut},Ft=500,Gt=()=>{const[t,o]=l.useState(""),{filterValue:n,searchValue:s}=C(u=>u.todoReducer),a=Vt(t,Ft),i=x();l.useEffect(()=>{t.length&&!s.length&&o("")},[n,s]),Ht(()=>{if(t.length){i(et(t));return}i(g())},[a]);const h=u=>{o(u.target.value)},r=()=>{o(""),i(g())};return e.jsxs("span",{className:N.searchTodoContainer,children:[e.jsx(Rt,{onClick:r,className:p(N.searchClearIcon,!s.length&&N.searchClearIconDisabled)}),e.jsx(H,{value:t,onChange:h,className:N.searchTodoInput,placeholder:"Enter to search for your todos"})]})},Pt=t=>ot(new Date,nt(t));function $t(t){return m({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attr:{d:"M464 336a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]})(t)}function Yt(t){return m({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"}}]})(t)}const Zt="_todoContainer_sr1mp_1",Wt="_todoContent_sr1mp_16",Kt="_todoCheck_sr1mp_20",qt="_todoInput_sr1mp_25",Xt="_todoCheckbox_sr1mp_29",Jt="_todoTitle_sr1mp_38",Qt="_todoCompleted_sr1mp_46",te="_todoDateContainer_sr1mp_51",ee="_todoDateContent_sr1mp_57",oe="_todoIcon_sr1mp_62",ne="_infoIcon_sr1mp_71",se="_trashIcon_sr1mp_78",ae="_editIcon_sr1mp_85",ce="_disabledEditIcon_sr1mp_92",de="_expiredTodoContainer_sr1mp_97",c={todoContainer:Zt,todoContent:Wt,todoCheck:Kt,todoInput:qt,todoCheckbox:Xt,todoTitle:Jt,todoCompleted:Qt,todoDateContainer:te,todoDateContent:ee,todoIcon:oe,infoIcon:ne,trashIcon:se,editIcon:ae,disabledEditIcon:ce,expiredTodoContainer:de},re=({title:t,createdDate:o,expirationDate:n,_id:s="",isCompleted:a})=>{const[i,h]=l.useState(!1),r=D("editTodoModal")[1],u=D("confirmModal")[1],L=x(),F=async()=>{const w=st(n,at,new Date).toISOString();await L(ct({_id:s,title:t,expirationDate:w,createdDate:o,isCompleted:!a})),L(g())},G=()=>{u(!0,{confirmCallback:async()=>{await L(dt(s)),L(g()),L(B({title:k.DELETE_TODO,type:S.SUCCESS}))},message:O.DELETE_TODO})},P=()=>{a||(r(!0),L(rt({_id:s,title:t,expirationDate:n,createdDate:o,isCompleted:a})))};return e.jsxs("li",{className:p(c.todoContainer,!Pt(n)&&c.expiredTodoContainer),children:[e.jsxs("div",{children:[e.jsxs("div",{className:c.todoContent,children:[e.jsxs("label",{className:c.todoCheck,children:[e.jsx(H,{className:c.todoInput,type:"checkbox",checked:a,onChange:F}),e.jsx("span",{className:c.todoCheckbox})]}),e.jsx("p",{className:p(c.todoTitle,a&&c.todoCompleted),children:t})]}),i&&e.jsxs("ul",{className:c.todoDateContainer,children:[e.jsx("li",{className:c.todoDateContent,children:o}),e.jsx(Et,{className:c.todoDateContent}),e.jsxs("li",{className:c.todoDateContent,children:[" ",n]})]})]}),e.jsx(Yt,{className:p(c.todoIcon,c.editIcon,a&&c.disabledEditIcon),onClick:P}),e.jsx(mt,{className:p(c.todoIcon,c.trashIcon),onClick:G}),e.jsx($t,{className:p(c.todoIcon,c.infoIcon),onClick:()=>h(w=>!w)})]})};let E;const ie=new Uint8Array(16);function le(){if(!E&&(E=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!E))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return E(ie)}const d=[];for(let t=0;t<256;++t)d.push((t+256).toString(16).slice(1));function he(t,o=0){return d[t[o+0]]+d[t[o+1]]+d[t[o+2]]+d[t[o+3]]+"-"+d[t[o+4]]+d[t[o+5]]+"-"+d[t[o+6]]+d[t[o+7]]+"-"+d[t[o+8]]+d[t[o+9]]+"-"+d[t[o+10]]+d[t[o+11]]+d[t[o+12]]+d[t[o+13]]+d[t[o+14]]+d[t[o+15]]}const ue=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),A={randomUUID:ue};function Te(t,o,n){if(A.randomUUID&&!o&&!t)return A.randomUUID();t=t||{};const s=t.random||(t.rng||le)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,o){n=n||0;for(let a=0;a<16;++a)o[n+a]=s[a];return o}return he(s)}const me="_filteredTodoContainer_1rtzp_1",pe="_filteredTodoButton_1rtzp_19",M={filteredTodoContainer:me,filteredTodoButton:pe},Ce=()=>{const{filterValue:t}=C(n=>n.todoReducer),o=x();return e.jsx("div",{className:M.filteredTodoContainer,children:it.map(n=>e.jsx(j,{disabled:t===n,className:M.filteredTodoButton,onClick:()=>o(U(n)),children:n},Te()))})},_e="_todoListHeader_tcd4m_1",ge="_todoListHeaderWrapper_tcd4m_12",xe="_todoListTitle_tcd4m_24",Le="_todoListCounter_tcd4m_46",ve="_clearCompletedTodosButton_tcd4m_54",je="_completedTodosTitle_tcd4m_58",T={todoListHeader:_e,todoListHeaderWrapper:ge,todoListTitle:xe,todoListCounter:Le,clearCompletedTodosButton:ve,completedTodosTitle:je},Ie=()=>{const{originalTodos:t}=C(h=>h.todoReducer),[o,n]=l.useState(0),s=D("confirmModal")[1],a=x();l.useEffect(()=>{const h=t.filter(r=>r.isCompleted);n(h.length)},[t]);const i=()=>{s(!0,{confirmCallback:async()=>{a(B({title:k.DELETE_COMPLETED_TODOS,type:S.SUCCESS})),await a(lt()),a(g()),a(U(y.ALL))},message:O.DELETE_COMPLETED_TODOS})};return e.jsxs("div",{className:T.todoListHeader,children:[e.jsxs("div",{className:T.todoListHeaderWrapper,children:[e.jsxs("div",{className:T.todoListContentContainer,children:[e.jsxs("p",{className:T.todoListTitle,children:["Tasks created",e.jsx("span",{className:T.todoListCounter,children:t.length})]}),e.jsxs("p",{className:p(T.todoListTitle,T.completedTodosTitle),children:["Completed",e.jsxs("span",{className:T.todoListCounter,children:[o," of ",t.length]})]})]}),e.jsx(j,{disabled:!t.filter(h=>h.isCompleted).length,onClick:i,className:p(M.filteredTodoButton,T.clearCompletedTodosButton),children:"Clear Completed"})]}),e.jsx(Ce,{})]})};function fe(t){return m({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M168,152a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h64A8,8,0,0,1,168,152Zm-8-40H96a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16Zm56-64V216a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V48A16,16,0,0,1,56,32H92.26a47.92,47.92,0,0,1,71.48,0H200A16,16,0,0,1,216,48ZM96,64h64a32,32,0,0,0-64,0ZM200,48H173.25A47.93,47.93,0,0,1,176,64v8a8,8,0,0,1-8,8H88a8,8,0,0,1-8-8V64a47.93,47.93,0,0,1,2.75-16H56V216H200Z"}}]})(t)}const Ne="_todoListNoDataContainer_1a1ig_1",Ee="_todoListText_1a1ig_14",v={todoListNoDataContainer:Ne,todoListText:Ee},ye=({title:t})=>{const{searchValue:o}=C(n=>n.todoReducer);return e.jsx("div",{className:v.todoListNoDataContainer,children:e.jsxs("div",{children:[e.jsx(fe,{}),t===y.ALL&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:v.todoListText,children:"You don't have any tasks registered yet"}),e.jsx("p",{className:v.todoListText,children:"Create tasks and organize your to-do items"})]}),t===y.ACTIVE&&e.jsx("p",{className:v.todoListText,children:"You don't have any active tasks registered yet"}),t===y.COMPLETED&&e.jsx("p",{className:v.todoListText,children:"You don't have any completed tasks registered yet"}),!!o.length&&e.jsx("p",{className:v.todoListText,children:t})]})})},De="_todoListSection_1656h_1",V={todoListSection:De},Be=()=>{const{searchedTodos:t,filterValue:o,searchValue:n,isPending:s}=C(i=>i.todoReducer),a=()=>n.length?`Nothing found in the filter: ${o}`:o;return e.jsxs("section",{className:V.todoListSection,children:[e.jsx(Ie,{}),s?e.jsx(ht,{}):e.jsx("ul",{className:V.todoListContainer,children:t.length?t.map(i=>e.jsx(re,{...i},i._id)):e.jsx(ye,{title:a()})})]})},ke="_todoLayoutContainer_135o9_1",Se={todoLayoutContainer:ke},we=()=>e.jsxs("main",{className:Se.todoLayoutContainer,children:[e.jsx(Mt,{}),e.jsx(Gt,{}),e.jsx(Be,{})]}),He=()=>{const t=R(),o=x(),n=localStorage.getItem("access-token");return l.useEffect(()=>{if(!n){t(z.LOGIN);return}o(g())},[]),n?e.jsxs(e.Fragment,{children:[e.jsx(ft,{}),e.jsx(we,{})]}):null};export{He as default};
