import{R as B,T as k,a as A,G as u,r as i,b as U,j as t,B as g,c as L,u as O,d as p,e as Y,m as Z,f as W,s as z,g as _,h as I,I as M,i as K,k as E,l as D,N as y,n as q,v as V,o as X,p as J,q as Q,t as H,w as T,x as tt,y as et,z as ot,A as st,C as b,D as at,E as nt,F as R,H as ct,J as v,L as rt}from"./index-956c5834.js";import{a as dt}from"./api-962931bd.js";class it{static async getTodos({userId:s,token:o}){return(await dt.get(`${B.TODOS}?userId=${s}`,{headers:{Authorization:`Bearer ${o}`}})).data}}function lt({token:e,userId:s}){return async function(o){try{o({type:k.TODO_PENDING});const a=await it.getTodos({token:e,userId:s});o({type:k.TODO_SUCCESS,payload:a.todos})}catch{o({type:A.RESET_TODOS})}}}function ht(e){return u({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.742 13.045a8.088 8.088 0 0 1-2.077.271c-2.135 0-4.14-.83-5.646-2.336a8.025 8.025 0 0 1-2.064-7.723A1 1 0 0 0 9.73 2.034a10.014 10.014 0 0 0-4.489 2.582c-3.898 3.898-3.898 10.243 0 14.143a9.937 9.937 0 0 0 7.072 2.93 9.93 9.93 0 0 0 7.07-2.929 10.007 10.007 0 0 0 2.583-4.491 1.001 1.001 0 0 0-1.224-1.224zm-2.772 4.301a7.947 7.947 0 0 1-5.656 2.343 7.953 7.953 0 0 1-5.658-2.344c-3.118-3.119-3.118-8.195 0-11.314a7.923 7.923 0 0 1 2.06-1.483 10.027 10.027 0 0 0 2.89 7.848 9.972 9.972 0 0 0 7.848 2.891 8.036 8.036 0 0 1-1.484 2.059z"}}]})(e)}function ut(e){return u({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6.993 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007S14.761 6.993 12 6.993 6.993 9.239 6.993 12zM12 8.993c1.658 0 3.007 1.349 3.007 3.007S13.658 15.007 12 15.007 8.993 13.658 8.993 12 10.342 8.993 12 8.993zM10.998 19h2v3h-2zm0-17h2v3h-2zm-9 9h3v2h-3zm17 0h3v2h-3zM4.219 18.363l2.12-2.122 1.415 1.414-2.12 2.122zM16.24 6.344l2.122-2.122 1.414 1.414-2.122 2.122zM6.342 7.759 4.22 5.637l1.415-1.414 2.12 2.122zm13.434 10.605-1.414 1.414-2.122-2.122 1.414-1.414z"}}]})(e)}function Tt(e){return u({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 20a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8h2V6h-4V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2H3v2h2zM9 4h6v2H9zM8 8h9v12H7V8z"}},{tag:"path",attr:{d:"M9 10h2v8H9zm4 0h2v8h-2z"}}]})(e)}const mt="_switchThemeButton_1qxg7_1",pt={switchThemeButton:mt},_t=()=>{const{type:e,setType:s}=i.useContext(U);return t.jsx(g,{className:pt.switchThemeButton,onClick:()=>s(o=>o===L.LIGHT?L.DARK:L.LIGHT),children:e===L.LIGHT?t.jsx(ht,{}):t.jsx(ut,{})})},Ct=""+new URL("logo-c9d4e892.svg",import.meta.url).href,xt="_headerContainer_1wjp0_1",gt="_headerTitle_1wjp0_10",ft="_headerContent_1wjp0_10",Lt="_headerNavigationContainer_1wjp0_20",jt="_logoutButton_1wjp0_27",m={headerContainer:xt,headerTitle:gt,headerContent:ft,headerNavigationContainer:Lt,logoutButton:jt},Nt=()=>{const e=O(),s=p(),o=()=>{localStorage.removeItem("access-token"),s({type:A.RESET_TODOS}),e(B.LOGIN)};return t.jsxs("header",{className:m.headerContainer,children:[t.jsx("img",{className:m.headerLogo,src:Ct,alt:"logo image"}),t.jsxs("h1",{className:m.headerTitle,children:[t.jsx("span",{className:m.headerContent,children:"to"}),t.jsx("span",{className:m.headerContent,children:"do"})]}),t.jsxs("div",{className:m.headerNavigationContainer,children:[t.jsx(g,{className:m.logoutButton,onClick:o,children:"Logout"}),t.jsx(_t,{})]})]})},vt=e=>{const s=Y.HOURS_IN_DAY*Z*W,o=new Date(e.getTime()+s);return z(o)};function It(e){return u({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z"}}]})(e)}function Et(e){return u({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z"}}]})(e)}const Dt="_createTodoContainer_128yt_1",yt="_createTodoInput_128yt_15",St="_createTodoButton_128yt_28",Bt="_createTodoButtonTitle_128yt_46",j={createTodoContainer:Dt,createTodoInput:yt,createTodoButton:St,createTodoButtonTitle:Bt},Mt="Enter",kt=()=>{const{todoTitle:e}=_(r=>r.todoReducer),s=p(),o=r=>{s(Q(r))},a=I("createTodoModal")[1],n=r=>{if(r.code===Mt)return e.trim().length?(s(q({createdDate:z(new Date),expirationDate:vt(new Date),todoTitle:e,isCompleted:!1,_id:V()})),o("")):s(E({title:D.EMPTY_TITLE,type:y.ERROR}))},d=r=>{const l=r.target.value;if(l.trim().length>=X.MAX_TITLE_LENGTH)return s(E({title:D.MAX_LENGTH,type:y.ERROR})),o(e.replace(l,""));o(J(l))};return t.jsxs("div",{className:j.createTodoContainer,children:[t.jsx(M,{onKeyDown:n,onChange:d,value:e,className:j.createTodoInput,placeholder:"Enter new todo"}),t.jsx(g,{onClick:()=>a(!0),type:K.BUTTON,className:j.createTodoButton,children:t.jsxs("span",{className:j.createTodoButtonTitle,children:[t.jsx("span",{children:"Create"}),t.jsx(Et,{})]})})]})},Ht=500;function wt(e,s=Ht){const[o,a]=i.useState(e);return i.useEffect(()=>{const n=setTimeout(()=>a(e),s);return()=>{clearTimeout(n)}},[e]),o}function At(e){return u({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M278.6 256l68.2-68.2c6.2-6.2 6.2-16.4 0-22.6-6.2-6.2-16.4-6.2-22.6 0L256 233.4l-68.2-68.2c-6.2-6.2-16.4-6.2-22.6 0-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3l68.2 68.2-68.2 68.2c-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3 6.2 6.2 16.4 6.2 22.6 0l68.2-68.2 68.2 68.2c6.2 6.2 16.4 6.2 22.6 0 6.2-6.2 6.2-16.4 0-22.6L278.6 256z"}}]})(e)}const Ot="_searchTodoContainer_up0lw_1",zt="_searchClearIcon_up0lw_4",Vt="_searchClearIconDisabled_up0lw_17",bt="_searchTodoInput_up0lw_21",N={searchTodoContainer:Ot,searchClearIcon:zt,searchClearIconDisabled:Vt,searchTodoInput:bt},Rt=()=>{const[e,s]=i.useState(""),{filterValue:o,searchValue:a}=_(x=>x.todoReducer),n=wt(e,500),d=p();i.useEffect(()=>{e.length&&!a.length&&s("")},[o,a]),i.useEffect(()=>{d(H(e))},[n]);const r=x=>{s(x.target.value)},l=()=>{a.length&&d(H(""))};return t.jsxs("span",{className:N.searchTodoContainer,children:[t.jsx(At,{onClick:l,className:T(N.searchClearIcon,!a.length&&N.searchClearIconDisabled)}),t.jsx(M,{value:e,onChange:r,className:N.searchTodoInput,placeholder:"Enter to search for your todos"})]})},$t=e=>tt(new Date,et(e));function Ft(e){return u({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attr:{d:"M464 336a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]})(e)}function Gt(e){return u({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"}}]})(e)}const Pt="_todoContainer_sr1mp_1",Ut="_todoContent_sr1mp_16",Yt="_todoCheck_sr1mp_20",Zt="_todoInput_sr1mp_25",Wt="_todoCheckbox_sr1mp_29",Kt="_todoTitle_sr1mp_38",qt="_todoCompleted_sr1mp_46",Xt="_todoDateContainer_sr1mp_51",Jt="_todoDateContent_sr1mp_57",Qt="_todoIcon_sr1mp_62",te="_infoIcon_sr1mp_71",ee="_trashIcon_sr1mp_78",oe="_editIcon_sr1mp_85",se="_disabledEditIcon_sr1mp_92",ae="_expiredTodoContainer_sr1mp_97",c={todoContainer:Pt,todoContent:Ut,todoCheck:Yt,todoInput:Zt,todoCheckbox:Wt,todoTitle:Kt,todoCompleted:qt,todoDateContainer:Xt,todoDateContent:Jt,todoIcon:Qt,infoIcon:te,trashIcon:ee,editIcon:oe,disabledEditIcon:se,expiredTodoContainer:ae},ne=({todoTitle:e,createdDate:s,expirationDate:o,_id:a,isCompleted:n})=>{const[d,r]=i.useState(!1),l=I("editTodoModal")[1],x=I("confirmModal")[1],f=p(),$=()=>{f(ot(a))},F=()=>{x(!0,{confirmCallback:()=>{f(st(a)),f(E({title:D.DELETE_TODO,type:y.SUCCESS}))},message:b.DELETE_TODO})},G=()=>{n||(l(!0),f(at({_id:a,todoTitle:e,expirationDate:o,createdDate:s,isCompleted:n})))};return t.jsxs("li",{className:T(c.todoContainer,!$t(o)&&c.expiredTodoContainer),children:[t.jsxs("div",{children:[t.jsxs("div",{className:c.todoContent,children:[t.jsxs("label",{className:c.todoCheck,children:[t.jsx(M,{className:c.todoInput,type:"checkbox",checked:n,onChange:$}),t.jsx("span",{className:c.todoCheckbox})]}),t.jsx("p",{className:T(c.todoTitle,n&&c.todoCompleted),children:e})]}),d&&t.jsxs("ul",{className:c.todoDateContainer,children:[t.jsx("li",{className:c.todoDateContent,children:s}),t.jsx(It,{className:c.todoDateContent}),t.jsxs("li",{className:c.todoDateContent,children:[" ",o]})]})]}),t.jsx(Gt,{className:T(c.todoIcon,c.editIcon,n&&c.disabledEditIcon),onClick:G}),t.jsx(Tt,{className:T(c.todoIcon,c.trashIcon),onClick:F}),t.jsx(Ft,{className:T(c.todoIcon,c.infoIcon),onClick:()=>r(P=>!P)})]})},ce="_filteredTodoContainer_1rtzp_1",re="_filteredTodoButton_1rtzp_19",S={filteredTodoContainer:ce,filteredTodoButton:re},de=()=>{const{filterValue:e}=_(o=>o.todoReducer),s=p();return t.jsx("div",{className:S.filteredTodoContainer,children:nt.map(o=>t.jsx(g,{disabled:e===o,className:S.filteredTodoButton,onClick:()=>s(R(o)),children:o},V()))})},ie="_todoListHeader_tcd4m_1",le="_todoListHeaderWrapper_tcd4m_12",he="_todoListTitle_tcd4m_24",ue="_todoListCounter_tcd4m_46",Te="_clearCompletedTodosButton_tcd4m_54",me="_completedTodosTitle_tcd4m_58",h={todoListHeader:ie,todoListHeaderWrapper:le,todoListTitle:he,todoListCounter:ue,clearCompletedTodosButton:Te,completedTodosTitle:me},pe=()=>{const{originalTodos:e}=_(r=>r.todoReducer),[s,o]=i.useState(0),a=I("confirmModal")[1],n=p();i.useEffect(()=>{const r=e.filter(l=>l.isCompleted);o(r.length)},[e]);const d=()=>{a(!0,{confirmCallback:()=>{n(E({title:D.DELETE_COMPLETED_TODOS,type:y.SUCCESS})),n(ct()),n(R(v.ALL))},message:b.DELETE_COMPLETED_TODOS})};return t.jsxs("div",{className:h.todoListHeader,children:[t.jsxs("div",{className:h.todoListHeaderWrapper,children:[t.jsxs("div",{className:h.todoListContentContainer,children:[t.jsxs("p",{className:h.todoListTitle,children:["Tasks created",t.jsx("span",{className:h.todoListCounter,children:e.length})]}),t.jsxs("p",{className:T(h.todoListTitle,h.completedTodosTitle),children:["Completed",t.jsxs("span",{className:h.todoListCounter,children:[s," of ",e.length]})]})]}),t.jsx(g,{disabled:!e.filter(r=>r.isCompleted).length,onClick:d,className:T(S.filteredTodoButton,h.clearCompletedTodosButton),children:"Clear Completed"})]}),t.jsx(de,{})]})};function _e(e){return u({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M168,152a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h64A8,8,0,0,1,168,152Zm-8-40H96a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16Zm56-64V216a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V48A16,16,0,0,1,56,32H92.26a47.92,47.92,0,0,1,71.48,0H200A16,16,0,0,1,216,48ZM96,64h64a32,32,0,0,0-64,0ZM200,48H173.25A47.93,47.93,0,0,1,176,64v8a8,8,0,0,1-8,8H88a8,8,0,0,1-8-8V64a47.93,47.93,0,0,1,2.75-16H56V216H200Z"}}]})(e)}const Ce="_todoListNoDataContainer_1a1ig_1",xe="_todoListText_1a1ig_14",C={todoListNoDataContainer:Ce,todoListText:xe},ge=({title:e})=>{const{searchValue:s}=_(o=>o.todoReducer);return t.jsx("div",{className:C.todoListNoDataContainer,children:t.jsxs("div",{children:[t.jsx(_e,{}),e===v.ALL&&t.jsxs(t.Fragment,{children:[t.jsx("p",{className:C.todoListText,children:"You don't have any tasks registered yet"}),t.jsx("p",{className:C.todoListText,children:"Create tasks and organize your to-do items"})]}),e===v.ACTIVE&&t.jsx("p",{className:C.todoListText,children:"You don't have any active tasks registered yet"}),e===v.COMPLETED&&t.jsx("p",{className:C.todoListText,children:"You don't have any completed tasks registered yet"}),!!s.length&&t.jsx("p",{className:C.todoListText,children:e})]})})},fe="_todoListSection_1656h_1",w={todoListSection:fe},Le=()=>{const{searchedTodos:e,filterValue:s,searchValue:o,isPending:a}=_(d=>d.todoReducer),n=()=>o.length?`Nothing found in the filter: ${s}`:s;return t.jsxs("section",{className:w.todoListSection,children:[t.jsx(pe,{}),a?t.jsx(rt,{}):t.jsx("ul",{className:w.todoListContainer,children:e.length?e.map(d=>t.jsx(ne,{...d},d._id)):t.jsx(ge,{title:n()})})]})},je="_todoLayoutContainer_135o9_1",Ne={todoLayoutContainer:je},ve=()=>t.jsxs("main",{className:Ne.todoLayoutContainer,children:[t.jsx(kt,{}),t.jsx(Rt,{}),t.jsx(Le,{})]}),De=()=>{const e=O(),s=p(),{user:o}=_(n=>n.authReducer),a=localStorage.getItem("access-token");return i.useEffect(()=>{if(!a){e(B.LOGIN);return}s(lt({token:a,userId:o==null?void 0:o._id}))},[]),a?t.jsxs(t.Fragment,{children:[t.jsx(Nt,{}),t.jsx(ve,{})]}):null};export{De as default};
